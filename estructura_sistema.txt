# ğŸ“ ESTRUCTURA DEL PROYECTO CRM PLUS

## ğŸ“Š RESUMEN GENERAL
Este es un sistema CRM (Customer Relationship Management) completo con frontend React, backend Node.js/Express, y mÃºltiples integraciones.

===============================================================================
## ğŸ—‚ï¸ ESTRUCTURA PRINCIPAL
===============================================================================

ianampudia11/
â”œâ”€â”€ ğŸ“‚ client/                          # Frontend de la aplicaciÃ³n
â”‚   â”œâ”€â”€ ğŸ“‚ public/                      # Archivos pÃºblicos estÃ¡ticos
â”‚   â”œâ”€â”€ ğŸ“‚ src/                         # CÃ³digo fuente del frontend
â”‚   â”‚   â”œâ”€â”€ App.tsx                     # Componente principal de la app
â”‚   â”‚   â”œâ”€â”€ main.tsx                    # Punto de entrada principal
â”‚   â”‚   â”œâ”€â”€ index.css                   # Estilos globales
â”‚   â”‚   â”œâ”€â”€ types.ts                    # Definiciones de tipos TypeScript
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ components/              # Componentes React (302 archivos)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ pages/                   # PÃ¡ginas de la aplicaciÃ³n (61 archivos)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ hooks/                   # React Hooks personalizados (38 archivos)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ contexts/                # Contextos de React (7 archivos)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ context/                 # Contextos adicionales
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ services/                # Servicios para llamadas API (9 archivos)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ utils/                   # Utilidades y helpers (15 archivos)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ lib/                     # LibrerÃ­as compartidas (9 archivos)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ types/                   # Tipos TypeScript adicionales
â”‚   â”‚   â””â”€â”€ ğŸ“‚ styles/                  # Estilos adicionales
â”‚   â””â”€â”€ index.html                      # HTML base
â”‚
â”œâ”€â”€ ğŸ“‚ server/                          # Backend de la aplicaciÃ³n
â”‚   â”œâ”€â”€ index.ts                        # Servidor principal
â”‚   â”œâ”€â”€ routes.ts                       # Rutas principales (776KB)
â”‚   â”œâ”€â”€ storage.ts                      # Capa de almacenamiento/base de datos
â”‚   â”œâ”€â”€ db.ts                          # ConfiguraciÃ³n de base de datos
â”‚   â”œâ”€â”€ auth.ts                        # AutenticaciÃ³n (46KB)
â”‚   â”œâ”€â”€ middleware.ts                  # Middlewares globales
â”‚   â”œâ”€â”€ migration-system.ts            # Sistema de migraciones
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ modules/                    # MÃ³dulos del backend (arquitectura modular)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ admin/                  # AdministraciÃ³n
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ analytics/              # AnalÃ­tica
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ calendar/               # Calendario
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ channels/               # Canales de comunicaciÃ³n
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ contacts/               # GestiÃ³n de contactos
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ deals/                  # GestiÃ³n de tratos/ventas
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ flows/                  # Flujos de trabajo
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ integrations/           # Integraciones externas
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ languages/              # Idiomas/traducciones
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ messages/               # MensajerÃ­a
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ notes/                  # Notas
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ payments/               # Pagos
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ pipelines/              # Pipelines de ventas
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ plans/                  # Planes de suscripciÃ³n
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ properties/             # Propiedades inmobiliarias
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ settings/               # Configuraciones
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ tags/                   # Etiquetas
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ tasks/                  # Tareas
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ webhooks/               # Webhooks
â”‚   â”‚   â””â”€â”€ ğŸ“‚ websites/               # Sitios web
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ middleware/                 # Middlewares especÃ­ficos (7 archivos)
â”‚   â”œâ”€â”€ ğŸ“‚ routes/                     # Rutas organizadas (25 archivos)
â”‚   â”œâ”€â”€ ğŸ“‚ services/                   # Servicios del backend (78 archivos)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ channels/               # Servicios de canales
â”‚   â”‚   â””â”€â”€ ğŸ“‚ document-processors/    # Procesadores de documentos
â”‚   â”œâ”€â”€ ğŸ“‚ types/                      # Tipos TypeScript del backend
â”‚   â”œâ”€â”€ ğŸ“‚ utils/                      # Utilidades del backend (16 archivos)
â”‚   â”œâ”€â”€ ğŸ“‚ widgets/                    # Widgets
â”‚   â””â”€â”€ ğŸ“‚ test/                       # Pruebas
â”‚
â”œâ”€â”€ ğŸ“‚ shared/                         # CÃ³digo compartido frontend/backend
â”‚   â””â”€â”€ ğŸ“‚ types/                      # Tipos TypeScript compartidos
â”‚
â”œâ”€â”€ ğŸ“‚ migrations/                     # Migraciones de base de datos (86 archivos)
â”‚
â”œâ”€â”€ ğŸ“‚ scripts/                        # Scripts de utilidad (61 archivos)
â”‚
â”œâ”€â”€ ğŸ“‚ translations/                   # Traducciones (3 archivos)
â”‚
â”œâ”€â”€ ğŸ“‚ public/                         # Archivos pÃºblicos del servidor
â”‚
â”œâ”€â”€ ğŸ“‚ uploads/                        # Archivos subidos
â”‚   â””â”€â”€ ğŸ“‚ webchat/                    # Archivos del webchat
â”‚
â”œâ”€â”€ ğŸ“‚ media/                          # Archivos multimedia
â”‚   â””â”€â”€ ğŸ“‚ temp/                       # Archivos temporales
â”‚
â”œâ”€â”€ ğŸ“‚ whatsapp-sessions/              # Sesiones de WhatsApp
â”‚
â”œâ”€â”€ ğŸ“‚ backups/                        # Respaldos
â”‚
â”œâ”€â”€ ğŸ“‚ dist/                           # Build de producciÃ³n
â”‚   â””â”€â”€ ğŸ“‚ public/
â”‚       â”œâ”€â”€ ğŸ“‚ assets/
â”‚       â””â”€â”€ ğŸ“‚ uploads/
â”‚
â”œâ”€â”€ ğŸ“‚ node_modules/                   # Dependencias de Node.js
â”‚
â”œâ”€â”€ ğŸ“‚ .agent/                         # ConfiguraciÃ³n del agente
â”‚
â””â”€â”€ ğŸ“‚ .git/                           # Repositorio Git

===============================================================================
## ğŸ“„ ARCHIVOS DE CONFIGURACIÃ“N PRINCIPAL
===============================================================================

### ConfiguraciÃ³n del Proyecto
- package.json - Dependencias y scripts npm
- package-lock.json - Lockfile de dependencias
- tsconfig.json - ConfiguraciÃ³n de TypeScript
- vite.config.ts - ConfiguraciÃ³n de Vite (build tool)
- vitest.config.ts - ConfiguraciÃ³n de tests
- tailwind.config.ts - ConfiguraciÃ³n de Tailwind CSS
- postcss.config.js - ConfiguraciÃ³n de PostCSS
- eslint.config.js - ConfiguraciÃ³n de ESLint

### Variables de Entorno
- .env - Variables de entorno (713 bytes)
- .env.local - Variables locales
- .env.development - Variables de desarrollo
- .env.example - Ejemplo de variables
- .env.template - Plantilla de variables

### Docker
- Dockerfile - Dockerfile principal (2887 bytes)
- Dockerfile.deploy - Dockerfile de deploy (868 bytes)
- Dockerfile.simple - Dockerfile simplificado
- docker-compose.yml - ConfiguraciÃ³n de Docker Compose
- docker-compose.dev.yml - Docker Compose para desarrollo
- docker-compose.template.yml - Plantilla de Docker Compose
- docker-entrypoint.sh - Script de entrada de Docker
- docker-entrypoint-deploy.sh - Script de entrada para deploy
- docker-entrypoint-simple.sh - Script de entrada simplificado

### Base de Datos
- drizzle.config.js - ConfiguraciÃ³n de Drizzle ORM
- drizzle.config.ts - ConfiguraciÃ³n TypeScript de Drizzle
- init-db.sql - InicializaciÃ³n de base de datos
- init-schema.sql - Schema inicial

### Deploy y Scripts
- deploy.sh - Script de despliegue (26KB)
- start.js - Script de inicio

===============================================================================
## ğŸ”§ SCRIPTS DE UTILIDAD
===============================================================================

### Scripts de Debug
- debug-deals.ts - Debug de tratos
- debug-pipelines.ts - Debug de pipelines
- debug-migration.ts - Debug de migraciones
- debug-get-deals.ts - Debug de obtenciÃ³n de tratos
- debug-deal-props.ts - Debug de propiedades de tratos
- debug-hidden-deal.ts - Debug de tratos ocultos
- debug-props.ts - Debug de propiedades

### Scripts de Base de Datos
- check-db-schema.ts - Verificar schema de BD
- check_db.ts - Verificar BD
- make_contact_id_nullable.ts - Hacer contactId nullable
- create_media_table.ts - Crear tabla de media
- add_checklist_column.ts - AÃ±adir columna checklist
- add_contact_assignee.ts - AÃ±adir asignado de contacto
- run-migration.ts - Ejecutar migraciones

### Scripts de ConfiguraciÃ³n
- seed-all.ts - Poblar base de datos
- seed-test-data.sql - Datos de prueba
- enable-registration.ts - Habilitar registro
- check-registration.ts - Verificar registro
- update-branding.ts - Actualizar branding
- verify-data.ts - Verificar datos

### Scripts de ReparaciÃ³n
- fix-broken-stage.ts - Reparar stage roto
- fix-pipeline-stages.ts - Reparar stages de pipeline
- fix-trigger.ts - Reparar trigger
- fix_index.js - Reparar Ã­ndice
- fix_storage.cjs - Reparar storage
- repair_index.js - Reparar Ã­ndice

### Otros Scripts
- create-test-deal.ts - Crear trato de prueba
- disable-trigger.ts - Deshabilitar trigger
- get-trigger-source.ts - Obtener fuente de trigger
- find-deals-line.ts - Encontrar lÃ­nea de deals
- find-error-source.ts - Encontrar fuente de error
- generate-hash.js - Generar hash
- clean_storage.py - Limpiar storage (Python)

===============================================================================
## ğŸ“¦ MÃ“DULOS DEL BACKEND (server/modules)
===============================================================================

Cada mÃ³dulo tÃ­picamente contiene:
- routes.ts - Rutas del mÃ³dulo
- service.ts - LÃ³gica de negocio
- types.ts - Tipos TypeScript

### Lista de MÃ³dulos (20 mÃ³dulos):

1.  admin         - AdministraciÃ³n del sistema
2.  analytics     - AnalÃ­tica y reportes
3.  calendar      - GestiÃ³n de calendario y citas
4.  channels      - Canales de comunicaciÃ³n (WhatsApp, Email, etc.)
5.  contacts      - GestiÃ³n de contactos
6.  deals         - GestiÃ³n de tratos/ventas
7.  flows         - Flujos de trabajo automatizados
8.  integrations  - Integraciones con servicios externos
9.  languages     - InternacionalizaciÃ³n
10. messages      - Sistema de mensajerÃ­a
11. notes         - Notas
12. payments      - Procesamiento de pagos
13. pipelines     - Pipelines de ventas
14. plans         - Planes de suscripciÃ³n
15. properties    - GestiÃ³n de propiedades inmobiliarias
16. settings      - Configuraciones del sistema
17. tags          - Sistema de etiquetas
18. tasks         - GestiÃ³n de tareas
19. webhooks      - Webhooks
20. websites      - GeneraciÃ³n de sitios web

===============================================================================
## ğŸ“š ESTADÃSTICAS DEL PROYECTO
===============================================================================

Frontend:
- Componentes:    302+
- PÃ¡ginas:        61
- Hooks:          38
- Servicios:      9
- Contextos:      7

Backend:
- MÃ³dulos:        20
- Servicios:      78
- Rutas:          25 archivos organizados
- Middlewares:    7

Base de Datos:
- Migraciones:    86

Otros:
- Scripts:        61+

===============================================================================
## ğŸ› ï¸ TECNOLOGÃAS PRINCIPALES
===============================================================================

### Frontend
- React con TypeScript
- Vite (Build tool)
- Tailwind CSS (Estilos)
- React Router (NavegaciÃ³n)
- React Query (GestiÃ³n de estado servidor)

### Backend
- Node.js con Express
- TypeScript
- PostgreSQL (Base de datos)
- Drizzle ORM
- WebSockets (ComunicaciÃ³n en tiempo real)

### DevOps
- Docker y Docker Compose
- Git (Control de versiones)
- Scripts de deploy automatizado

### Integraciones
- WhatsApp
- Email
- Webhooks
- Calendarios
- Sistemas de pago

===============================================================================
## ğŸ“ NOTAS IMPORTANTES
===============================================================================

1. El archivo routes.ts del servidor es muy grande (776KB), sugiere una 
   arquitectura monolÃ­tica que podrÃ­a beneficiarse de mÃ¡s modularizaciÃ³n.

2. Hay mÃºltiples archivos de backup y logs que podrÃ­an limpiarse periÃ³dicamente.

3. El proyecto tiene 86 migraciones de base de datos, lo que indica un 
   desarrollo activo y evolutivo.

4. La estructura modular del backend (carpeta modules/) es una buena prÃ¡ctica 
   de arquitectura.

5. El proyecto estÃ¡ configurado tanto para desarrollo local como para 
   despliegue en producciÃ³n con Docker.

===============================================================================

Fecha: 12/1/2026
